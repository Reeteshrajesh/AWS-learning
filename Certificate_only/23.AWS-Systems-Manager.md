# üîß What is AWS Systems Manager?

**AWS Systems Manager (SSM)** is a **unified operations hub** for:

* Managing **EC2**, **on-premises servers**, and **other AWS resources**.
* Securely **running commands**, **patching**, **automating**, **inventorying**, and **troubleshooting**.

SSM is like a **Swiss Army knife for DevOps** on AWS ‚Äî combining automation, visibility, and control in one tool.

---

## üß∞ Key Capabilities of SSM

| Feature             | Description                                             |
| ------------------- | ------------------------------------------------------- |
| **Session Manager** | SSH-less, agent-based access to EC2 (or on-prem)        |
| **Run Command**     | Run shell commands remotely across instances            |
| **Patch Manager**   | Automate OS patching across fleet                       |
| **State Manager**   | Enforce baseline configs (like cron, file perms)        |
| **Automation**      | Run multi-step tasks (e.g., AMI builds, snapshots)      |
| **Inventory**       | Collect metadata about instances (apps, versions)       |
| **Parameter Store** | Store and access secrets/config securely                |
| **Change Manager**  | Request + approve changes before applying               |
| **OpsCenter**       | Central view for ops issues, integrated with CloudWatch |
| **Fleet Manager**   | GUI for managing EC2 and on-prem machines               |

---

## üõ†Ô∏è How SSM Works (High Level Architecture)

```
+----------------------+           +------------------+
| AWS Console/CLI/API | ------->  | Systems Manager   |
+----------------------+           +------------------+
                                          |
        +---------------------------------+---------------------------------+
        |                 |                    |              |             |
   Session Manager   Run Command     Patch Manager     Automation     Parameter Store
        |                 |                    |              |             |
   [SSM Agent]      [SSM Agent]          [SSM Agent]     [SSM Documents]    [KMS]
   on EC2/on-prem   on EC2/on-prem      on EC2/on-prem
```

---

## üß† Production-Level Use Cases

### 1. **Secure EC2 Access Without SSH**

* Eliminate open SSH ports and bastion hosts
* Use **Session Manager** (browser or CLI) with:

  * IAM permissions
  * Logged sessions (CloudTrail/CloudWatch)
  * MFA enforcement

### 2. **Patch Management at Scale**

* Use **Patch Baselines** to:

  * Auto-approve critical updates
  * Define maintenance windows
  * Report on patch compliance

### 3. **Fleet-Wide Remote Execution**

* Use **Run Command** to:

  * Restart services
  * Deploy code changes
  * Clear cache/logs

### 4. **Store and Retrieve Secrets**

* Use **SSM Parameter Store** with KMS to manage:

  * DB credentials
  * API keys
  * Feature flags (versioned)

### 5. **Automated Backup and AMI Creation**

* Use **SSM Automation Documents** to:

  * Create AMIs from EC2
  * Snapshot EBS volumes
  * Replace instances in an ASG

### 6. **Onboarding and Configuration**

* Use **State Manager** to:

  * Auto-install CloudWatch Agent
  * Enforce tagging
  * Ensure NTP is synced

---

## üîê Security and Governance

| Strategy           | Description                                           |
| ------------------ | ----------------------------------------------------- |
| **IAM Policies**   | Define who can access/run commands                    |
| **KMS**            | Encrypt SSM Parameters (especially secrets)           |
| **Logging**        | Send session logs to CloudWatch/S3                    |
| **Change Manager** | Approval-based change workflows                       |
| **SSM Agent**      | Must be installed and up-to-date on managed instances |

---

## üß™ DevOps Best Practices

| Practice                                | Benefit                                      |
| --------------------------------------- | -------------------------------------------- |
| Replace SSH with Session Manager        | Stronger security, better auditing           |
| Use tagging in Run Command targets      | Run ops by environment or service            |
| Parameter Store + Environment Variables | Inject configs into apps at runtime          |
| Monitor patch compliance                | Enforce security and ops SLAs                |
| Use SSM Documents as code               | Track infrastructure workflows in Git        |
| Integrate SSM with CodePipeline         | For blue/green deploys, approvals, rollbacks |

---

## üß© SSM Integration Patterns

| Tool                               | How it integrates                                         |
| ---------------------------------- | --------------------------------------------------------- |
| **CloudWatch**                     | Logs + metrics from sessions, commands, agents            |
| **CloudTrail**                     | Tracks who ran what                                       |
| **AWS Config**                     | Audits for patching, instance compliance                  |
| **EventBridge**                    | Triggers SSM automation on events (e.g., instance launch) |
| **Terraform** / **CloudFormation** | Provision documents, parameters, and associations         |

---

## üìù Examples

### 1. **Run Command Example**

```bash
aws ssm send-command \
  --document-name "AWS-RunShellScript" \
  --targets "Key=tag:Env,Values=prod" \
  --parameters 'commands=["systemctl restart nginx"]' \
  --comment "Restart nginx on all prod servers"
```

### 2. **SSM Parameter Store (Secure String)**

```bash
aws ssm put-parameter \
  --name "/prod/db/password" \
  --value "supersecurepass123" \
  --type "SecureString" \
  --key-id "alias/aws/ssm"
```

### 3. **SSM Automation Document (YAML Sample)**

```yaml
description: Restart EC2 instance
schemaVersion: '0.3'
mainSteps:
  - action: aws:restartInstance
    name: restartEC2
    inputs:
      InstanceId: "{{ InstanceId }}"
```

---

## üîç Alternatives and Considerations

| Tool                | Use When                                                  |
| ------------------- | --------------------------------------------------------- |
| **Ansible**         | You need full configuration management                    |
| **SSM**             | Best for ops tasks, automation, and AWS-native systems    |
| **SSH**             | Not recommended in production unless absolutely necessary |
| **Secrets Manager** | If you need automatic secret rotation                     |
| **OpsWorks**        | For Chef/Puppet-heavy infra                               |

---

## ‚úÖ Summary

**AWS Systems Manager** is essential in modern AWS production environments because it:

* Increases **security** by replacing SSH
* Simplifies **operations** across fleets
* Enables **automation** and **standardization**
* Facilitates **auditability** and **compliance**
